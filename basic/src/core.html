<!DOCTYPE html>
<!-- 
    Start a webserver with `npx http-server`. Then, navigate to http://127.0.0.1:8080/src/core.html
-->
<html>
    <head>
        <style>
            body {
                margin: 30px;
                font: 18px "Myriad Pro", Helvetica, Arial, sans-serif;
            }
        </style>
    </head>
    <body>
        <div>Start a webserver with <code>npx http-server</code>. Then, navigate to http://127.0.0.1:8080/src/core.html</div>
        <div id="output"></div>
        <!--
            vexflow-core.js loads no music fonts by default.
            You'll need to explicitly load a font by calling async Vex.Flow.fetchMusicFont(fontName).
        -->
        <script src="../node_modules/vexflow/build/cjs/vexflow-core.js"></script>
        <script>
            function loadScript(url) {
                return new Promise((resolve, reject) => {
                    const script = document.createElement("script");
                    script.onload = resolve;
                    script.onerror = reject;
                    script.src = url;
                    document.getElementsByTagName("head")[0].appendChild(script);
                });
            }

            // This line is required. Otherwise, the music font stack is empty.
            Vex.Flow.fetchMusicFont("Petaluma").then(() => {
                Vex.Flow.setMusicFont("Petaluma");
                loadScript("app.js");
            });
        </script>
    </body>
</html>
